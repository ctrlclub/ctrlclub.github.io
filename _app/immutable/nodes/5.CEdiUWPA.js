import{A as l}from"../chunks/YeyiDlbR.js";import{r as ie}from"../chunks/7n9ZZ9HD.js";import"../chunks/DsnmJJEf.js";import{aA as ue,aB as M,ak as $,ad as J,ae as v,af as u,aC as be,aD as _,aE as t,aF as m,aG as p,aH as y,aI as x,d as a,al as F}from"../chunks/Cdt7Vh5C.js";import{s as R,e as o}from"../chunks/CGqf4lwb.js";import{i as V}from"../chunks/TKTXOwgQ.js";import{e as z,i as H}from"../chunks/CuIubu47.js";import{r as Q}from"../chunks/DpZru2zH.js";import{b as K}from"../chunks/D2GEF0m4.js";const he=!1;async function me(){let s=await(await fetch(`${l}/dashboard/auth`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).json();s.success==!1&&ie(307,"/");let b=await(await fetch(`${l}/dashboard/challenges`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).json();return b.success==!1?{success:!1,errorReason:"Failed to load challenges: "+s.errorReason,content:void 0}:{success:!0,errorReason:"",content:{challenges:b.data}}}const Re=Object.freeze(Object.defineProperty({__proto__:null,load:me,ssr:he},Symbol.toStringTag,{value:"Module"}));var pe=_('<div><span> </span> <label><input type="checkbox"/> Visible</label> <label><input type="checkbox"/> Unlocked</label> <button>x</button></div>'),fe=_(" <br/>",1),ge=_('<h1>Challenge Manager</h1> <!> <input id="challenge-id" type="number" placeholder="New ID"/> <button>+ Add Challenge</button> <button>Submit Changes (be careful)</button> <br/><br/><br/><br/> <h1>Challenge Reset</h1> <b>REMEMBER!! Subtracting 1 from the challenge ID, they are 0-indexed</b> <br/> <input id="user-id-reset" type="email" placeholder="User ID"/> <input id="challenge-id-reset" type="email" placeholder="Challenge ID"/> <button>Reset (be careful)</button> <br/><br/><br/><br/> <h1>Password Reset</h1> <br/> <input id="user-id-password" type="email" placeholder="User ID"/> <input id="new-password" type="text" placeholder="New Password"/> <button>Update password (be careful)</button> <br/><br/><br/><br/> <h1>Clear Teams</h1> <a>Removes all team member registers, but not the team codes</a> <br/> <button>Clear ALL teams (be careful)</button> <h1>Gen Teams</h1> <b>REMOVES all team member registers AND codes</b><a>, and makes new codes</a> <br/> <input id="new-team-count" type="text" placeholder="Count of teams"/> <button>Clear ALL teams and gen new codes (be careful)</button> <br/> <b>Result:</b><br/> <!> <button>TEST REQ</button>',1),ve=_("<a> </a>");function je(j,s){ue(s,!0);let d=M($(s.data.content.challenges)),b=M($({}));function S(){let e=parseInt(document.getElementById("challenge-id").value);a(d).push({challengeId:e,visible:!1,unlocked:!1})}function W(e){F(d,a(d).filter(n=>n.challengeId!=e),!0)}async function X(){await fetch(`${l}/dashboard/challenges`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a(d)),credentials:"include"})}async function Y(){let e=document.getElementById("user-id-reset").value,n=parseInt(document.getElementById("challenge-id-reset").value);await fetch(`${l}/dashboard/reset-challenge`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,challengeId:n}),credentials:"include"})}async function Z(){let e=document.getElementById("user-id-password").value,n=document.getElementById("new-password").value;await fetch(`${l}/dashboard/set-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,newPassword:n}),credentials:"include"})}async function ee(){await fetch(`${l}/dashboard/clear-teams`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})}async function ae(){let e=parseInt(document.getElementById("new-team-count").value),f=await(await fetch(`${l}/dashboard/gen-team-codes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:e}),credentials:"include"})).json();f.success&&F(b,f.data,!0)}async function te(){parseInt(document.getElementById("new-team-count").value);let n=await(await fetch(`${l}/dashboard/leaderboard/4`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).json();console.log(n)}var O=J(),ne=v(O);{var re=e=>{var n=J(),f=v(n);{var se=c=>{var i=ge(),g=t(v(i),2);z(g,17,()=>a(d),H,(w,r,C)=>{var h=pe(),I=m(h),de=m(I);p(I);var T=t(I,2),G=m(T);Q(G),y(),p(T);var E=t(T,2),L=m(E);Q(L),y(),p(E);var ce=t(E,2);p(h),x(()=>R(de,`ID: ${a(r).challengeId??""}`)),K(G,()=>a(r).visible,k=>a(r).visible=k),K(L,()=>a(r).unlocked,k=>a(r).unlocked=k),o("click",ce,()=>{W(a(r).challengeId)}),u(w,h)});var P=t(g,4),B=t(P,2),D=t(B,17),q=t(D,15),A=t(q,13),N=t(A,11),U=t(N,7);z(U,17,()=>a(b),H,(w,r)=>{y();var C=fe(),h=v(C);y(),x(()=>R(h,`Team ${a(r).teamId??""} : ${a(r).teamCode??""}`)),u(w,C)});var le=t(U,2);o("click",P,S),o("click",B,X),o("click",D,Y),o("click",q,Z),o("click",A,ee),o("click",N,ae),o("click",le,te),u(c,i)},oe=c=>{var i=ve(),g=m(i);p(i),x(()=>R(g,`Couldn't access dashboard: ${s.data.errorReason??""}`)),u(c,i)};V(f,c=>{s.data.success?c(se):c(oe,!1)})}u(e,n)};V(ne,e=>{s.data&&e(re)})}u(j,O),be()}export{je as component,Re as universal};
