import{A as R}from"../chunks/YeyiDlbR.js";import{r as F}from"../chunks/7n9ZZ9HD.js";import"../chunks/DsnmJJEf.js";import{aA as D,aD as k,aF as i,aG as n,aE as u,aI as G,af as y,aC as O,al as p,aB as S,d as s,ae as B,aH as W,b7 as H}from"../chunks/Cdt7Vh5C.js";import{s as q,e as z}from"../chunks/CGqf4lwb.js";import{i as E}from"../chunks/TKTXOwgQ.js";import{e as X,i as K}from"../chunks/CuIubu47.js";import{c as Q}from"../chunks/CAkJl1aw.js";import{C as Y,s as N}from"../chunks/yc8YCHxF.js";/* empty css                */import{g as P}from"../chunks/DLD_K23d.js";import{t as U,c as V,f as Z,a as $}from"../chunks/D4DSLqL9.js";import"../chunks/D0iwhpLH.js";const ee=!1;async function ae(){let g=await fetch(`${R}/challenges/list`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(g.status!=200)return{success:!1,challenges:[],myTeam:void 0};let e=await g.json();if(e.success){let h=await(await fetch(`${R}/teams/myteam`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).json();return{success:!0,challenges:e.data,myTeam:h.data}}else throw console.warn("Status was 200 but no challenges were returned, assumed unauthenticated: "+e.errorReason),console.warn("Hence, redirecting user to login."),F(307,"/login")}const Ce=Object.freeze(Object.defineProperty({__proto__:null,load:ae,ssr:ee},Symbol.toStringTag,{value:"Module"}));var te=k('<div id="container"><div id="card-header" class="svelte-87i3zr"><a id="challenge-id" class="svelte-87i3zr"> </a> <a id="challenge-unlocked-indicator">‚óè</a></div> <div id="card-body" class="svelte-87i3zr"><a id="challenge-name" class="svelte-87i3zr"> </a></div> <div id="card-footer" class="svelte-87i3zr"><!></div></div>');function se(g,e){D(e,!0);const o=Q();function h(){o("click")}var c=te();let w;var d=i(c),v=i(d),m=i(v);n(v);var A=u(v,2);let f;n(d);var _=u(d,2),T=i(_),C=i(T,!0);n(T),n(_);var b=u(_,2),I=i(b);Y(I,{get current(){return e.completedSubchallenges},get total(){return e.numSubchallenges}}),n(b),n(c),G((x,j)=>{w=N(c,1,"cartoon-button svelte-87i3zr",null,w,x),q(m,`${e.isTeamChallenge?"Team ":""}Challenge ${e.challengeId??""}`),f=N(A,1,"svelte-87i3zr",null,f,j),q(C,e.challengeName)},[()=>({"card-locked":!e.challengeUnlocked}),()=>({"locked-status":!e.challengeUnlocked})]),z("click",c,h),y(g,c),O()}var ne=k("<a>Would you like to leave your current team?</a>"),ie=k('<div><a>Enter your team code:</a> <br/> <input type="number" id="team-code" placeholder="Team Code" class="cartoon-input input-spacer svelte-1g3qkir"/></div>'),re=k('<div id="background-overlay" class="svelte-1g3qkir"><div id="container" class="cartoon-border svelte-1g3qkir"><div class="button close-button svelte-1g3qkir"><button class="cartoon-button" style="font-weight: 600;">X</button></div> <div class="header center svelte-1g3qkir"><span>Team Manager</span></div> <div class="feedback center svelte-1g3qkir"><!></div> <a style="display: block; width: 100%; text-align: center; color: red; font-size: 0.8em;"> </a> <div class="button center svelte-1g3qkir"><button class="cartoon-button continue svelte-1g3qkir"> </button></div></div></div>');function le(g,e){D(e,!0);let o=S(!1),h=S(void 0),c=S("");(async()=>{let r=await(await fetch(`${R}/teams/myteam`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).json();r.success==!1&&r.errorReason=="Not in team"?(p(o,!1),p(h,void 0)):r.success&&(p(o,!0),p(h,r.data,!0))})();async function w(){if(s(o)){await fetch(`${R}/teams/leave`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),e.callback(!0);return}let a=document.getElementById("team-code").value;if(!a)return;try{a=parseInt(a)}catch{p(c,"Invalid team code");return}let M=await(await fetch(`${R}/teams/register`,{method:"POST",body:JSON.stringify({teamCode:a}),headers:{"Content-Type":"application/json"},credentials:"include"})).json();if(!M.success){p(c,M.errorReason,!0);return}e.callback(!0)}var d=re(),v=i(d),m=i(v),A=i(m);n(m);var f=u(m,4),_=i(f);{var T=a=>{var r=ne();y(a,r)},C=a=>{var r=ie();y(a,r)};E(_,a=>{s(o)?a(T):a(C,!1)})}n(f);var b=u(f,2),I=i(b,!0);n(b);var x=u(b,2),j=i(x),t=i(j,!0);n(j),n(x),n(v),n(d),G(()=>{q(I,s(c)),q(t,s(o)?"Leave Team":"Join Team")}),z("click",A,()=>{e.callback(!1)}),z("click",j,w),U(3,v,()=>Z,()=>({easing:V,timing:125,y:300})),U(3,d,()=>$,()=>({easing:V,timing:100})),y(g,d),O()}var oe=k('<div id="header" class="svelte-1b1r7oj"><h1>Challenges</h1> <a id="description" class="svelte-1b1r7oj">Test your knowledge with code challenges, designed to teach your skills related to your NEA. Dive into easy, medium or hard challenges based on your preference.</a></div> <div id="card-container" class="svelte-1b1r7oj"></div>',1),ce=k('<div id="static-team-panel" class="cartoon-button svelte-1b1r7oj"> <svg id="static-team-svg" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 16 16" class="svelte-1b1r7oj"><path fill="currentColor" d="M8 2.002a1.998 1.998 0 1 0 0 3.996a1.998 1.998 0 0 0 0-3.996M12.5 3a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3m-9 0a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3M5 7.993A1 1 0 0 1 6 7h4a1 1 0 0 1 1 1v3a3 3 0 0 1-.146.927A3.001 3.001 0 0 1 5 11zM4 8c0-.365.097-.706.268-1H2a1 1 0 0 0-1 1v2.5a2.5 2.5 0 0 0 3.436 2.319A4 4 0 0 1 4 10.999zm8 0v3c0 .655-.157 1.273-.436 1.819A2.5 2.5 0 0 0 15 10.5V8a1 1 0 0 0-1-1h-2.268c.17.294.268.635.268 1"></path></svg></div>'),de=k('<button class="cartoon-button team-button svelte-1b1r7oj"><svg id="team-svg" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 16 16" class="svelte-1b1r7oj"><path fill="currentColor" d="M8 2.002a1.998 1.998 0 1 0 0 3.996a1.998 1.998 0 0 0 0-3.996M12.5 3a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3m-9 0a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3M5 7.993A1 1 0 0 1 6 7h4a1 1 0 0 1 1 1v3a3 3 0 0 1-.146.927A3.001 3.001 0 0 1 5 11zM4 8c0-.365.097-.706.268-1H2a1 1 0 0 0-1 1v2.5a2.5 2.5 0 0 0 3.436 2.319A4 4 0 0 1 4 10.999zm8 0v3c0 .655-.157 1.273-.436 1.819A2.5 2.5 0 0 0 15 10.5V8a1 1 0 0 0-1-1h-2.268c.17.294.268.635.268 1"></path></svg></button>'),ve=k('<div id="container" class="svelte-1b1r7oj"><!></div> <button class="cartoon-button logout-button svelte-1b1r7oj"><svg id="logout-svg" xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" class="svelte-1b1r7oj"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M10 8V6a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2v-2"></path><path d="M15 12H3l3-3m0 6l-3-3"></path></g></svg></button> <!> <!>',1);function xe(g,e){D(e,!0);let o=S(!1);async function h(){await fetch(R+"/auth/logout",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),P("/login")}function c(t,a){a&&P(`/challenges/${t+1}`)}function w(){p(o,!0)}function d(t){p(o,!1),t&&window.location.reload()}var v=ve(),m=B(v),A=i(m);{var f=t=>{var a=oe(),r=u(B(a),2);X(r,21,()=>e.data.challenges,K,(M,l)=>{{let J=H(()=>s(l).challengeId+1),L=H(()=>s(l).unlocked&&(!s(l).isTeamChallenge||s(l).isTeamChallenge&&e.data.myTeam!=null));se(M,{get challengeName(){return s(l).name},get challengeId(){return s(J)},get challengeUnlocked(){return s(L)},get numSubchallenges(){return s(l).numSubchallenges},get completedSubchallenges(){return s(l).completedSubchallenges},get isTeamChallenge(){return s(l).isTeamChallenge},$$events:{click:()=>{(s(l).unlocked&&!s(l).isTeamChallenge||s(l).isTeamChallenge&&e.data.myTeam!=null)&&c(s(l).challengeId,s(l).unlocked)}}})}}),n(r),y(t,a)},_=t=>{};E(A,t=>{e.data.success?t(f):t(_,!1)})}n(m);var T=u(m,2),C=u(T,2);{var b=t=>{var a=ce(),r=i(a);W(),n(a),G(()=>q(r,`Team ${e.data.myTeam.teamId??""}
        / Players: ${e.data.myTeam.userIds.length??""} `)),z("click",a,w),y(t,a)},I=t=>{var a=de();z("click",a,w),y(t,a)};E(C,t=>{e.data.myTeam!=null?t(b):t(I,!1)})}var x=u(C,2);{var j=t=>{le(t,{callback:d})};E(x,t=>{s(o)&&t(j)})}z("click",T,h),y(g,v),O()}export{xe as component,Ce as universal};
