import"../chunks/DsnmJJEf.js";import{aA as N,aD as u,aI as h,d as t,af as p,aC as H,aF as v,aE as m,aB as f,aG as d,al as o}from"../chunks/Cdt7Vh5C.js";import{e as R,s as E}from"../chunks/CGqf4lwb.js";import{i as P}from"../chunks/TKTXOwgQ.js";import{r as k}from"../chunks/DpZru2zH.js";import{a as C}from"../chunks/D2GEF0m4.js";import{p as K}from"../chunks/D4Caz1gY.js";import{A as Q}from"../chunks/YeyiDlbR.js";import{g as V}from"../chunks/DLD_K23d.js";/* empty css                */const fe=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),W=l=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l),X=l=>l.length>=4;async function Y(l){let i={success:!1,errorReason:"Unknown"};try{let a=await fetch(Q+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l),credentials:"include"});if(a.ok)return await a.json().catch(n=>(i.errorReason=n,i));i.errorReason=`error_code:${a.status}`}catch(a){i.errorReason=a}return i}var Z=u('<p class="form-error svelte-1x05zx6"> </p>'),$=u('<p class="form-error svelte-1x05zx6">&nbsp;</p>'),ee=u('<p class="form-error svelte-1x05zx6"> </p>'),re=u('<p class="form-error svelte-1x05zx6">&nbsp;</p>'),te=u('<p class="form-error svelte-1x05zx6"> </p>'),ae=u('<p class="form-error svelte-1x05zx6">&nbsp;</p>'),se=u(`<div id="login-page" class="svelte-1x05zx6"><div id="center" class="cartoon-border svelte-1x05zx6"><div id="center-title" class="svelte-1x05zx6"><img src="/assets/logo_128.svg" width="128" height="128" id="logo" class="svelte-1x05zx6"/></div> <div id="login-container" class="svelte-1x05zx6"><form novalidate="" class="svelte-1x05zx6"><input id="email" name="email" type="email" placeholder="Email..." required class="svelte-1x05zx6"/> <!> <input id="password" name="password" type="password" placeholder="Code..." required minlength="8" class="svelte-1x05zx6"/> <!> <button class="cartoon-button svelte-1x05zx6" id="submit-button" type="submit">Let's Go ðŸ‘‰</button> <!></form></div></div></div>`);function xe(l,i){N(i,!0);let a=f(""),c=f(""),n=f(""),x=f(""),_=f(""),w=f(!0);function A(){o(x,t(a)?W(t(a))?"":"Enter a valid email":"Email is required",!0)}function B(){o(_,t(c)?X(t(c))?"":"Password must be at least 8 characters":"Password is required",!0)}async function D(e){if(e.preventDefault(),o(n,"Authenticating..."),o(w,!1),setTimeout(()=>{o(w,!0)},2e3),A(),B(),t(x)||t(_)){o(n,"Bad email or password");return}let r={email:t(a),password:t(c)};console.log("Attempting login...");let s=await Y(r);if(s.success){V("/challenges");return}o(n,s.errorReason,!0),console.log(`Failed to login: ${s.errorReason}`)}var z=se(),S=v(z),j=m(v(S),2),y=v(j),g=v(y);k(g);var q=m(g,2);{var L=e=>{var r=Z(),s=v(r,!0);d(r),h(()=>E(s,t(x))),p(e,r)},F=e=>{var r=$();p(e,r)};P(q,e=>{t(x)?e(L):e(F,!1)})}var b=m(q,2);k(b);var O=m(b,2);{var G=e=>{var r=ee(),s=v(r,!0);d(r),h(()=>E(s,t(_))),p(e,r)},I=e=>{var r=re();p(e,r)};P(O,e=>{t(_)?e(G):e(I,!1)})}var T=m(O,2),U=m(T,2);{var J=e=>{var r=te(),s=v(r,!0);d(r),h(()=>E(s,t(n))),p(e,r)},M=e=>{var r=ae();p(e,r)};P(U,e=>{t(n)?e(J):e(M,!1)})}d(y),d(j),d(S),d(z),h(()=>T.disabled=!t(w)),C(g,()=>t(a),e=>o(a,e)),R("blur",g,A),C(b,()=>t(c),e=>o(c,e)),R("blur",b,B),R("submit",y,K(D)),p(l,z),H()}export{xe as component,fe as universal};
